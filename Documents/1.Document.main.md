>

---

---

# Azure Combincation of AZ-900 and AZ-204

> - As cloud computing becomes essential for modern application development, mastering Microsoft Azure is a critical skill for any serious .NET developer. This combined learning path integrates the fundamental cloud knowledge of **AZ-900** with the hands-on, developer-focused skills from AZ-204, giving you a complete roadmap from cloud basics to production-ready app development on Azure.
> - Whether you're new to Azure or already building web APIs, microservices, or serverless apps, this guide will help you:

    - Understand cloud models, architectures, and cost management.
    - Build and deploy .NET apps using Azure services like App Service, Functions, and AKS.
    - Secure applications with Azure AD, Managed Identity, and Key Vault.
    - Integrate messaging, logging, monitoring, and CI/CD pipelines.
    - Prepare for both the AZ-900 Fundamentals and AZ-204 Developer Associate certifications.

> - This document is structured for progressive learning, including theory, hands-on labs, and real-world project guidance, which tailored specifically for developers with a .NET background.

### 1. Understand Cloud Concepts (AZ-900 + Developer View)

#### 1.1. What is Cloud Computing? (IaaS, PaaS, SaaS)

Using remote servers hosted on internet to store, manage and process data instead of on premise server. It is the delivery of computing services such as Servers, Storages, Databases, Networking, Software, Analytics, and Intelligence over the internet ("the cloud") to offer faster innovation, flexible resources, and economics of scale. Instead of buying and maintaining physical servers, users can access these services on-demand from a cloud provider like Microsoft Azure, AWS, or Google Cloud

##### 1.1.1. IaaS (Infrastructure as a Service)

Azure provides **Virtualized Computing Infrastructure**, we can rent **VMs, Storage and Networking**, but we have to be responsible for OS, Update and applications. Some Azure IaaS examples:

- **Azure Virtual Machines (VMs)**: run Windows/Linux on cloud VMs
- **Azure Virtual Network (VNet)**: private networks for secure communication
- **Azure Load Balancer**: distributes traffic across services
- **Azure Blob Storage**: store unstructured object data (like images or backups)
- **Azure VPN Gateway**: connect on-prem networks to Azure

When using IaaS, we have to manage the **operating system, middleware, runtime, and application**, while Azure manages the underlying hardware and virtualization layer

###### 1.1.1.1. Azure Virtual Machines (VMs)

Basically, it is a **virtual version of physical computer running on Azure**. We just need to choose the **OS** (Windows/Linux), **size** (CPU/RAM), and install the software. It allows you to deploy and run operating systems, application and custom workloads **just like a physical server**

**Key Concepts**

| Concept                      | Description                                                    |
| ---------------------------- | -------------------------------------------------------------- |
| Image                        | Pre-configured OS or app (Windows Server, Ubuntu, SQL Server)  |
| Size                         | Determines CPU, RAM, storage, and cost                         |
| Region                       | Data center where the VM is hosted                             |
| Availability Options         | Ensure high availability: availability Set, Zone, or Scale Set |
| OS Disk/Data Disk            | VM needs a system disk (OS) and optionally extra data disks    |
| Public IP                    | Internet access (optional)                                     |
| NSG (Network Security Group) | Controls what traffic can reach the VM                         |

Noted: **NSG** is a **Cloud firewall** sitting **in front of the VM**. It filters traffic before it reach to VM. Example when creating the VM, we just enable the VM via **port 22** for SSH, after that we deploy the application via **port 80 of Nginx server**, in that case, we have to config **NSG to allow request via port 80 from internet**. And also need to make sure the application is listening on the port 80 and allow this port

**For VM Security and Best Practices**

| Best Practice                | Why it's Important                                         |
| ---------------------------- | ---------------------------------------------------------- |
| Use NSGs                     | Block unsued ports (only allow 22 for SSH or 3389 for RDP) |
| Disable public IP            | Use Azure Bastion or VPN for secure access                 |
| Enable Auth-shutdown         | Save cost by shutting down unused VMs                      |
| Enable backup and monitoring | Recover and track performance                              |
| Patch OS                     | Use Azure Update Management for automated updates          |

**_Practice Case 1.1.1.1. Azure Virtual Machines (VMs)_**

###### 1.1.1.2. Azure Virtual Network (VNet)

An **Azure Virtual Network (VNet)** is like a **private network in the cloud**. It lets you **securely connect**: Azure VMs, App Service, Azure Kubernetes Services (AKS), On-premies networks (via VPN/ExpressRoute)

**Key Features**

| Feature                      | Description                            |
| ---------------------------- | -------------------------------------- |
| Subnets                      | Divide the VNet into smaller segments  |
| NSG (Network Security Group) | Control inbound/outbound traffic rules |
| Peering                      | Connect 2 VNets privately              |
| VPN Gateway                  | Connect your VNet to on-prem network   |
| Private Endpoints            | Secure access to Azure PaaS using IPs  |

An **Azure VPN Gateway** is a dedicated network gateway that enables encrypted communication between:

| Scenario             | Purpose                 |
| -------------------- | ----------------------- |
| On-premises â†’ Azure  | Site-to-Site VPN (S2S)  |
| Client PC â†’ Azure    | Point-to-Site VPN (P2S) |
| Azure VNet â†’ another | VNet VNet-to-VNet VPN   |

It connects your **private networks to Azure** over the **public internet**, securely using protocols like **IPsec/IKE.**

There are some cases we can use for Azure VPN Gateway

- A private .NET Web API behind an internal load balancer
- An internal PostgreSQL or SQL Server database
- A Redis instance for caching
- A Jenkins server without a public IP

###### 1.1.1.3. Azure Load Balancer

**Azure Load Balancer** is a **Layer 4** (Transport Layer) load balancer that distributes **TCP or UDP traffic across multiple virtual machines (VMs) or services**. It ensures **high availability, scalability, and fault tolerance** of your applications.

There are two type of Load Balancers in Azure

| Scenario               | Description                                                              | Public Access? |
| ---------------------- | ------------------------------------------------------------------------ | -------------- |
| Public Load Balancer   | Exposes your app to the **internet**, distributes traffic to backend VMs | Yes            |
| Internal Load Balancer | Used for **private** apps, distributes traffic only within the **VNet**  | No             |

_The public Load Balancer will forward request from internet to th VMs_

When using the Load Balancer, we need to ensure the VMs match these conditions

- Must be in **the same VNet and region**
- Must be running a web server on **the same port (e.g., port 80)**
- NSG on the VM must allow **inbound traffic on that port**

The basic steps to perform to achieve load balancing:

- Create **multiple VMs** to run the application, for example run the Nginx application via port 80
- All the VMs must be in **the same VNet and region**, to be connected by Azure Load Balancer
- Install **Web Server / App on each VM**. We need to ensure the application is listenting on the port 80 and it is ready to respond to requests
- Open port 80 in **NSG (Firewall)** to allow inbound HTTP traffic (port 80) to reach the VMs
- Create a **Public Load Balancer**. It purposes to create a single public-facing IP address to handle all external HTTP(s) traffic. It is the **gateway to the internet**
- Create a **Backend Pool** to define which VMs the Load Balancer should use to distribute traffic, _It is like a collection of VMs, which are in the same VNet and Region_
- Create a **Health Probe**: Continuously checks if each VM is health by calling / or /health. That avoids sending the traffic to VMs that is **Down, Not responding, Crashed**
- Create a **Load Balancing Rule**: is is how the Load Balancer to traffic from the frontend (Public IP) to the backend VMs, when creating we need to define, **frontend port, backend port, backend pool, health probe**

**Why This is a Best Practice**

| Benefit              | Explanation                                                                |
| -------------------- | -------------------------------------------------------------------------- |
| Security             | VMs no need to have public IPs, just need config port 80 on NSG            |
| Central Control      | You apply NSG, firewall, SSL, and routing rules at the Load Balancer level |
| Scalability          | Add or remove VMs without exposing new IPs                                 |
| Cleaner Architecture | Load Balancer becomes the single access point (http://public-ip)           |

Basically, **Load Balancer** does not natively SSL termination - it only works at Layer 4 (TCP), if we want to achieve SSL termination, we should use **Azure Application Gateway**,
**_Azure Application Gateway works at Layer 7 (HTTP/HTTPS), in which, it can handle HTTPS request and forward HTTP to backend (SSL termination)_**

We can also use Load Balancer with SSL, by installing the SSL at the VM level

**_Practice Case 1.1.1.3. Azure Load Balancer_**

###### 1.1.1.4. Azure Blob Storage

One of the most widely used services in Azure for **storing unstructured data**. **Azure Blob Storage (Binary Large Object)** is a service for storing large amounts of unstructured data: **text files, images, video, backups, logs, datasets (json, csv), virtual machine disks (VHD)**

Azure Storage organizes data into

Storage Account
â””â”€â”€ Container (like a folder)
â””â”€â”€ Blob (the actual file/data)

**Three Types of Blobs:**

| Type        | Use Case                                              |
| ----------- | ----------------------------------------------------- |
| Block Blob  | Files, documents, media â€” most common                 |
| Append Blob | Logs, audit trails â€” optimized for appending          |
| Page Blob   | Disks for Azure VMs â€” optimized for random read/write |

**Blob Storage Tiers (for cost management)**

| Benefit | Explanation                               | Use When                          |
| ------- | ----------------------------------------- | --------------------------------- |
| Hot     | Frequently accessed data                  | Web apps, active content          |
| Cool    | Infrequently accessed, lower cost         | Monthly backups                   |
| Archive | Rarely accessed, lowest cost, slow access | Legal archives, long-term storage |

When integrate with Storage Account, we will use two information: **Access Keys** as Connection String and **Container Name**. We can also create the Container from the API

**Azure Blob Storage â€” Real-World Uses & Purpose**

| Use Case                       | Purpose                                                                                    |
| ------------------------------ | ------------------------------------------------------------------------------------------ |
| User File Uploads              | Store files from users (images, PDFs, documents) securely and scalably.                    |
| Media Storage                  | Host large media files (videos, audio) with streaming or CDN support.                      |
| Backup & Disaster Recovery     | Store VM snapshots, database backups, and configuration files safely.                      |
| Application Log Archival       | Collect and archive logs for diagnostics, audit, and compliance.                           |
| Static Website Hosting         | Serve websites (HTML/CSS/JS) directly from Blob Storage with optional custom domain.       |
| Data Lake / Big Data Ingestion | Ingest and store raw data (CSV, JSON, Parquet) for analytics pipelines.                    |
| Secure Document Sharing        | Allow secure, time-limited access to sensitive files using SAS tokens.                     |
| Event-Driven Automation        | Trigger Azure Functions or Logic Apps when a file is uploaded (e.g., auto-process, alert). |

**Why do we need Azure Blob Storage?**

| Reason                  | Explanation                                                                             |
| ----------------------- | --------------------------------------------------------------------------------------- |
| Scalable                | We can store any amounts of file data - no need to manage disk                          |
| Cost-effective          | Just need to pay for what you store. No upfront hardware or maintenance                 |
| Accessible Anywhere     | Accessible from any region, device, or app over HTTPS â€” great for mobile, web, or APIs. |
| Easy Integration        | Works seamlessly with .NET, Python, Azure Functions, and DevOps pipelines.              |
| Supports All File Types | Upload and store anything: images, video, logs, JSON, backups, etc.                     |
| Analytics-Ready         | Integrated with Data Lake, Synapse, and Databricks for big data processing.             |

**Example Pricing (Estimates):**

| Tier    | Use Case                          | Approx. Price (per GB/month) |
| ------- | --------------------------------- | ---------------------------- |
| Hot     | Frequent access (web/app content) | ~$0.018/GB                   |
| Cool    | Infrequent access (backups)       | ~$0.01/GB                    |
| Archive | Rare access (legal/archive)       | ~$0.00099/GB                 |

We can also host a simple static website with **index.html, style.css, script.js** files quickly. Azure will provide the HTTPS by default, we can connect to **Azure CDN** for faster global performance

**Operation Costs (very low)**

| Operation        | Approx. Cost per 10,000 ops |
| ---------------- | --------------------------- |
| Read (GET)       | ~$0.004                     |
| Write (PUT/POST) | ~$0.05                      |

Even with thousands of reads/writes per day, youâ€™ll spend less than $1/month in most cases.

âœ… SQL Server: Store high-value events for real-time admin views

âœ… Azure Blob: Store all audit logs (detailed, raw, long-term)

| Feature                     | Azure Blob (Hot) | Azure SQL (S0) |
| --------------------------- | ---------------- | -------------- |
| 1M logs/month (500 MB)      | ~$0.15           | âŒ ~$15        |
| Easy scaling to 100M logs   | âœ… Still cheap   | âŒ Expensive   |
| Long-term retention (years) | âœ… Cheap         | âŒ Costly      |
| Querying                    | âŒ No built-in   | âœ… Powerful    |

For SQL Database perspective

- We need to pay for the compute (not just storage), even if you use 6 GB only, you're charged for the plan

To **query multiple log files across one container** in Azure Blob Storage, the best approach is to use **Azure Synapse Analytics with Serverless SQL Pool** or **Azure Data Explorer (ADX)**

Step by step to **Use Azure Synapse Serverless SQL Pool**

- Ensure the file within the **readable format** (csv, json, parquet)
- Create **Synapse Workspace** and enable **Serverless SQL Pool**
- Connect Storage to Synapse
- Run a Query Over All Files
  `SQL
 SELECT *
 FROM OPENROWSET(
     BULK 'https://yourstorageaccount.blob.core.windows.net/logs/*.csv',
     FORMAT = 'CSV',
     FIELDTERMINATOR = ',',
     ROWTERMINATOR = '\n',
     FIRSTROW = 2
 ) AS logs
 WHERE level = 'ERROR';    
`
  **Cost**
- We are charged only for query execution, not storage or uptime.
- No separate cost for infrastructure or reserved compute.

**_Practice Case 1.1.1.4. Azure Blob Storage_**

###### 1.1.1.5. Azure VPN Gateway

**Azure VPN Gateway** is a **networking service** that lets you **connect your on-premises networks** to **Azure** over the Internet **securely and privately** using **IPsec/IKE VPN tunnels**

**Types of VPN Connections:**
| Type | Description |
| ---------------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| Site-to-Site (S2S) | Connects your on-premises network to Azure VNet over a VPN device. |
| Point-to-Site (P2S) | Individual client devices (e.g., laptops) connect securely to Azure using certificates or RADIUS authentication. |
| VNet-to-VNet | Connect two Azure VNets (even across regions) together via VPN Gateway. |
| ExpressRoute with VPN failover | Use VPN Gateway as a backup if your ExpressRoute connection fails. |

**Site-to-Site (S2S) VPN:** we want multiple servers/devices in your office to communicate with Azure resources (like VMs, databases) as if they are on the same local network.

**Point-to-Site (P2S) VPN:** A remote developer needs to securely access VMs or databases in Azure from their personal laptop.

**VNet-to-VNet VPN:** You have a frontend app in one VNet (East US) and a backend service in another VNet (West US), and they need to communicate securely.

**ExpressRoute with VPN Failover:** ExpressRoute is a service that allows you to create a **private connection** between your
**on-premises network (e.g., office/data center)** and **Azure â€” without going over the public internet.**

| VPN Type                | Connects...                                    | Use Case                          | Speed & Reliability             | Internet-Based? | Cost        |
| ----------------------- | ---------------------------------------------- | --------------------------------- | ------------------------------- | --------------- | ----------- |
| **Site-to-Site (S2S)**  | On-prem network â†” Azure VNet                   | Office/data center to Azure       | Medium speed, reliable          | âœ… Yes          | ðŸ’° Low      |
| **Point-to-Site (P2S)** | Individual device â†” Azure VNet                 | Remote users (e.g., laptops)      | Lower speed, good for few users | âœ… Yes          | ðŸ’° Very Low |
| **VNet-to-VNet**        | Azure VNet â†” Azure VNet (same or diff. region) | Linking Azure regions or services | Medium speed, secure            | âœ… Yes          | ðŸ’° Low      |
| **ExpressRoute**        | On-prem network â†” Azure VNet (private circuit) | High-performance enterprise apps  | ðŸš€ High speed, SLA-backed       | âŒ No (private) | ðŸ’°ðŸ’° High   |

**_Practice Case 1.1.1.5. Azure VPN Gateway_**

##### 1.1.2. PaaS (Platform as a Service)

Azure provides a managed platform for **building, testing, deploying, and scaling applications**. **No need to manage infrastructure or OS updates**, Azure PaaS Examples:

- **Azure App Service**: Deploy web apps with auto-scaling and CI/CD.
- **Azure Functions**: Run serverless functions triggered by events.
- **Azure SQL Database**: Managed relational database with high availability.
- **Azure Logic Apps**: Automate workflows using a visual designer.
- **Azure Kubernetes Service (AKS)**: Container orchestration without managing master nodes.

###### 1.1.2.1. Azure App Service

**Azure App Service** is one of the most popular and powerful **PaaS (Platform-as-a-Service)** offerings on Azure. It allows you to **deploy, scale, and manage** web apps easily without managing infrastructure.

We can use **Azure App Service** to:

- **Host web apps, REST APIs, or mobile backends** in .NET, Java, Node.js, Python, PHP, etc.
- Deploy via **GitHub, Azure DevOps, or ZIP/Pipeline.**
- Get built-in features like: **SSL, Custom domain, Authentication, Monitoring, Staging slots**

It will automatically add (horizontally) or remove instances (servers) of your app based on real-time demand â€” like CPU, memory, or number of requests. To achieve it, we will define the **CPU usage, Memory usage, HTTP request count, Custom metrics (e.g., queue length in Service Bus)**

**For Example:**

- If CPU > 70% for 5 minutes, increase to 3 instances
- If CPU < 30% for 10 minutes, reduce to 1 instance

- Handle traffic spikes without manual intervention
- Save costs when load is low

**High-Level Comparison for Web App (.NET), WebJob, Azure Function**

| Feature              | **Web App (.NET)**       | **WebJob**                        | **Azure Function**                  |
| -------------------- | ------------------------ | --------------------------------- | ----------------------------------- |
| Purpose              | Serve web/API requests   | Run background or scheduled tasks | Event-driven, serverless compute    |
| Triggered By         | HTTP Requests            | Timer, Queue, Manual, Continuous  | Timer, HTTP, Queue, Blob, etc.      |
| Execution Model      | Always On (Web Server)   | Runs inside Web App plan          | Starts on event, scales dynamically |
| Hosting              | App Service              | Attached to App Service           | Serverless Function App             |
| Scaling              | Auto-scale with App Plan | Shares App Plan scaling           | Auto-scales independently           |
| Dev Language Support | .NET, Node, Java, etc.   | .NET, Python, etc.                | .NET, Python, JavaScript, etc.      |
| Cost Model           | App Service Plan pricing | Free (shared with Web App)        | Consumption-based (pay per use)     |
| Use Cases            | Web/API apps             | Queue processing, scheduled jobs  | Serverless jobs, APIs, ETL tasks    |

**_Practice Case 1.1.2.1. Azure App Service_**

###### 1.1.2.2. Azure Functions

**Azure Functions** will run **small pieces of code ("functions")** in the cloud, without worrying about infrastructure

- ðŸ’¡ **Serverless** â†’ You donâ€™t manage VMs or servers
- âš¡ **Event-driven** â†’ Executes on demand (e.g., timer, HTTP, queue)
- ðŸ’° **Pay only for what you use** â†’ Billed per execution

**What You Can Build with Azure Functions**
| Trigger Type | Use Case |
| ----------------- | ---------------------------------------------- |
| **HTTP Trigger** | Build lightweight APIs or webhooks |
| **Timer Trigger** | Run scheduled tasks (like CRON jobs) |
| **Queue Trigger** | Process messages in Azure Queue or Service Bus |
| **Blob Trigger** | React to new file uploads |
| **Cosmos DB** | Process changes to database records |

**Total Cost Comparison (Typical Small App)**
| Platform | Cost (Low Load) | Cost (High Load) | Auto-scale | Pay-When-Idle |
| --------------------------------- | ----------------- | ---------------- | ---------- | ------------- |
| **Azure Functions** (Consumption) | âœ… **Freeâ€“\$5/mo** | âœ… \$10â€“30+ | âœ… Yes | âœ… Yes |
| **App Service (Basic)** | âŒ \~\$14/mo min | âŒ \~\$14+ | âŒ Manual | âŒ No |
| **App Service (Standard)** | âŒ \~\$70/mo+ | âŒ \~\$100+ | âœ… Yes | âŒ No |
| **Azure VM (B1s)** | âŒ \~\$10/mo min | âŒ \$10â€“200+ | âŒ Manual | âŒ No |

**Summary key feature**

- **HTTP APIs and Webhooks:** a simple rest apis, or build the pre-api to be called by third party
- **Scheduled Jobs / Background Tasks:** cron job
- **Process Azure Queues:** consume the queue item inside the service account
- **React to Blob/File Uploads:** trigger when uploading file to blob
- **Database Change Detection (Cosmos DB):** trigger when uploading data to db
- **Send Emails, Push Notifications, SMS:** simple api integrating with other service
- **Business Logic Behind Azure Event Grid / Event Hub:**
- **ML & AI Inference:** integrate with ML & AI
- **CI/CD Automation:** easy to integrate with CI/CD
- **Secure Backend Operations:** apply security

**_Practice Case 1.1.2.2. Azure Functions_**

###### 1.1.2.3. Azure SQL Database

**Azure SQL Database** is a fully managed relational database service in Microsoft Azure. Itâ€™s built on **SQL Server**, so everything you know about T-SQL, tables, views, stored procedures still appliesâ€”but you **donâ€™t have to manage infrastructure** (like VMs, disks, OS updates, SQL patching).

- Run SQL Server workloads without managing infrastructure.
- Automatically scale, patch, and back up.
- Integrate with other Azure services like Azure Functions, Logic Apps, or Power BI

**Deployment Models**

| Model                | Use Case                                                                                           |
| -------------------- | -------------------------------------------------------------------------------------------------- |
| **Single Database**  | A standalone database. Good for microservices or isolated workloads                                |
| **Elastic Pool**     | Share resources across multiple databases (for cost efficiency)                                    |
| **Managed Instance** | Close to full SQL Server, supports cross-db queries, SQL Agent, CLR, etc. Great for lift-and-shift |

**_Practice Case 1.1.2.3. Azure SQL Database_**

###### 1.1.2.4. Azure Logic Apps [TODO]

###### 1.1.2.5. Azure Kubernetes Service (AKS) [TODO]

===================================================================================================================================================

##### 1.1.3. SaaS (Software as a Service) [TODO]

Azure hosts ready-to-use apps for business needsâ€”users just sign in and use them. Microsoft manages everything, Azure SaaS Examples:

- **Microsoft 365 (Office 365)**: Word, Excel, Teams, Outlook (hosted by Azure)
- **Dynamics 365**: CRM and ERP solutions
- **Power BI**: Business analytics platform
- **Azure DevOps Services**: Code repo, CI/CD pipelines, work tracking

#### 1.2. Public, Private, Hybrid Cloud [TODO]

#### 1.3. Cloud benefits: scalability, elasticity, agility [TODO]

#### 1.4. Stateful vs Stateless Architecture [TODO]

#### 1.5. App Service vs Functions vs AKS [TODO]

#### 1.6. Containers vs App Service vs Kubernetes [TODO]
