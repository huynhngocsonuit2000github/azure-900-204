> ### 1. Understand Cloud Concepts (AZ-900 + Developer View)
>
> #### 1.1. What is Cloud Computing? (IaaS, PaaS, SaaS)
>
> ##### 1.1.1. IaaS (Infrastructure as a Service)
>
> ###### 1.1.1.1. Azure Virtual Machines (VMs)
>
> ###### 1.1.1.2. Azure Virtual Network (VNet)
>
> ###### 1.1.1.3. Azure Load Balancer
>
> ###### 1.1.1.4. Azure Blob Storage
>
> ###### 1.1.1.5. Azure VPN Gateway
>
> ##### 1.1.2. PaaS (Platform as a Service)
>
> ###### 1.1.2.1. Azure App Service [Review]
>
> ###### 1.1.2.2. Azure Functions [Review]
>
> ###### 1.1.2.3. Azure SQL Database [Review]
>
> ###### 1.1.2.4. Azure Logic Apps [Review]
>
> ###### 1.1.2.5. Azure Kubernetes Service (AKS) [Review]
>
> ##### 1.1.3. SaaS (Software as a Service) [TODO]
>
> #### 1.2. Public, Private, Hybrid Cloud [TODO]
>
> #### 1.3. Cloud benefits: scalability, elasticity, agility [TODO]
>
> #### 1.4. Stateful vs Stateless Architecture [TODO]
>
> #### 1.5. App Service vs Functions vs AKS [TODO]
>
> #### 1.6. Containers vs App Service vs Kubernetes [TODO]
>
> ### 2....

---

---

# Azure Combincation of AZ-900 and AZ-204

> - As cloud computing becomes essential for modern application development, mastering Microsoft Azure is a critical skill for any serious .NET developer. This combined learning path integrates the fundamental cloud knowledge of **AZ-900** with the hands-on, developer-focused skills from AZ-204, giving you a complete roadmap from cloud basics to production-ready app development on Azure.
> - Whether you're new to Azure or already building web APIs, microservices, or serverless apps, this guide will help you:

    - Understand cloud models, architectures, and cost management.
    - Build and deploy .NET apps using Azure services like App Service, Functions, and AKS.
    - Secure applications with Azure AD, Managed Identity, and Key Vault.
    - Integrate messaging, logging, monitoring, and CI/CD pipelines.
    - Prepare for both the AZ-900 Fundamentals and AZ-204 Developer Associate certifications.

> - This document is structured for progressive learning, including theory, hands-on labs, and real-world project guidance, which tailored specifically for developers with a .NET background.

### 1. Understand Cloud Concepts (AZ-900 + Developer View)

#### 1.1. What is Cloud Computing? (IaaS, PaaS, SaaS)

Using remote servers hosted on internet to store, manage and process data instead of on premise server. It is the delivery of computing services such as Servers, Storages, Databases, Networking, Software, Analytics, and Intelligence over the internet ("the cloud") to offer faster innovation, flexible resources, and economics of scale. Instead of buying and maintaining physical servers, users can access these services on-demand from a cloud provider like Microsoft Azure, AWS, or Google Cloud

##### 1.1.1. IaaS (Infrastructure as a Service)

Azure provides **Virtualized Computing Infrastructure**, we can rent **VMs, Storage and Networking**, but we have to be responsible for OS, Update and applications. Some Azure IaaS examples:

- **Azure Virtual Machines (VMs)**: run Windows/Linux on cloud VMs
- **Azure Virtual Network (VNet)**: private networks for secure communication
- **Azure Load Balancer**: distributes traffic across services
- **Azure Blob Storage**: store unstructured object data (like images or backups)
- **Azure VPN Gateway**: connect on-prem networks to Azure

When using IaaS, we have to manage the **operating system, middleware, runtime, and application**, while Azure manages the underlying hardware and virtualization layer

###### 1.1.1.1. Azure Virtual Machines (VMs)

Basically, it is a **virtual version of physical computer running on Azure**. We just need to choose the **OS** (Windows/Linux), **size** (CPU/RAM), and install the software. It allows you to deploy and run operating systems, application and custom workloads **just like a physical server**

**Key Concepts**

| Concept                      | Description                                                    |
| ---------------------------- | -------------------------------------------------------------- |
| Image                        | Pre-configured OS or app (Windows Server, Ubuntu, SQL Server)  |
| Size                         | Determines CPU, RAM, storage, and cost                         |
| Region                       | Data center where the VM is hosted                             |
| Availability Options         | Ensure high availability: availability Set, Zone, or Scale Set |
| OS Disk/Data Disk            | VM needs a system disk (OS) and optionally extra data disks    |
| Public IP                    | Internet access (optional)                                     |
| NSG (Network Security Group) | Controls what traffic can reach the VM                         |

Noted: **NSG** is a **Cloud firewall** sitting **in front of the VM**. It filters traffic before it reach to VM. Example when creating the VM, we just enable the VM via **port 22** for SSH, after that we deploy the application via **port 80 of Nginx server**, in that case, we have to config **NSG to allow request via port 80 from internet**. And also need to make sure the application is listening on the port 80 and allow this port

**For VM Security and Best Practices**

| Best Practice                | Why it's Important                                         |
| ---------------------------- | ---------------------------------------------------------- |
| Use NSGs                     | Block unsued ports (only allow 22 for SSH or 3389 for RDP) |
| Disable public IP            | Use Azure Bastion or VPN for secure access                 |
| Enable Auth-shutdown         | Save cost by shutting down unused VMs                      |
| Enable backup and monitoring | Recover and track performance                              |
| Patch OS                     | Use Azure Update Management for automated updates          |

**_Practice Case 1.1.1.1. Azure Virtual Machines (VMs)_**

###### 1.1.1.2. Azure Virtual Network (VNet)

An **Azure Virtual Network (VNet)** is like a **private network in the cloud**. It lets you **securely connect**: Azure VMs, App Service, Azure Kubernetes Services (AKS), On-premies networks (via VPN/ExpressRoute)

**Key Features**

| Feature                      | Description                            |
| ---------------------------- | -------------------------------------- |
| Subnets                      | Divide the VNet into smaller segments  |
| NSG (Network Security Group) | Control inbound/outbound traffic rules |
| Peering                      | Connect 2 VNets privately              |
| VPN Gateway                  | Connect your VNet to on-prem network   |
| Private Endpoints            | Secure access to Azure PaaS using IPs  |

An **Azure VPN Gateway** is a dedicated network gateway that enables encrypted communication between:

| Scenario             | Purpose                 |
| -------------------- | ----------------------- |
| On-premises → Azure  | Site-to-Site VPN (S2S)  |
| Client PC → Azure    | Point-to-Site VPN (P2S) |
| Azure VNet → another | VNet VNet-to-VNet VPN   |

It connects your **private networks to Azure** over the **public internet**, securely using protocols like **IPsec/IKE.**

There are some cases we can use for Azure VPN Gateway

- A private .NET Web API behind an internal load balancer
- An internal PostgreSQL or SQL Server database
- A Redis instance for caching
- A Jenkins server without a public IP

###### 1.1.1.3. Azure Load Balancer

**Azure Load Balancer** is a **Layer 4** (Transport Layer) load balancer that distributes **TCP or UDP traffic across multiple virtual machines (VMs) or services**. It ensures **high availability, scalability, and fault tolerance** of your applications.

There are two type of Load Balancers in Azure

| Scenario               | Description                                                              | Public Access? |
| ---------------------- | ------------------------------------------------------------------------ | -------------- |
| Public Load Balancer   | Exposes your app to the **internet**, distributes traffic to backend VMs | Yes            |
| Internal Load Balancer | Used for **private** apps, distributes traffic only within the **VNet**  | No             |

_The public Load Balancer will forward request from internet to th VMs_

When using the Load Balancer, we need to ensure the VMs match these conditions

- Must be in **the same VNet and region**
- Must be running a web server on **the same port (e.g., port 80)**
- NSG on the VM must allow **inbound traffic on that port**

The basic steps to perform to achieve load balancing:

- Create **multiple VMs** to run the application, for example run the Nginx application via port 80
- All the VMs must be in **the same VNet and region**, to be connected by Azure Load Balancer
- Install **Web Server / App on each VM**. We need to ensure the application is listenting on the port 80 and it is ready to respond to requests
- Open port 80 in **NSG (Firewall)** to allow inbound HTTP traffic (port 80) to reach the VMs
- Create a **Public Load Balancer**. It purposes to create a single public-facing IP address to handle all external HTTP(s) traffic. It is the **gateway to the internet**
- Create a **Backend Pool** to define which VMs the Load Balancer should use to distribute traffic, _It is like a collection of VMs, which are in the same VNet and Region_
- Create a **Health Probe**: Continuously checks if each VM is health by calling / or /health. That avoids sending the traffic to VMs that is **Down, Not responding, Crashed**
- Create a **Load Balancing Rule**: is is how the Load Balancer to traffic from the frontend (Public IP) to the backend VMs, when creating we need to define, **frontend port, backend port, backend pool, health probe**

**Why This is a Best Practice**

| Benefit              | Explanation                                                                |
| -------------------- | -------------------------------------------------------------------------- |
| Security             | VMs no need to have public IPs, just need config port 80 on NSG            |
| Central Control      | You apply NSG, firewall, SSL, and routing rules at the Load Balancer level |
| Scalability          | Add or remove VMs without exposing new IPs                                 |
| Cleaner Architecture | Load Balancer becomes the single access point (http://public-ip)           |

Basically, **Load Balancer** does not natively SSL termination - it only works at Layer 4 (TCP), if we want to achieve SSL termination, we should use **Azure Application Gateway**,
**_Azure Application Gateway works at Layer 7 (HTTP/HTTPS), in which, it can handle HTTPS request and forward HTTP to backend (SSL termination)_**

We can also use Load Balancer with SSL, by installing the SSL at the VM level

**_Practice Case 1.1.1.3. Azure Load Balancer_**

###### 1.1.1.4. Azure Blob Storage

One of the most widely used services in Azure for **storing unstructured data**. **Azure Blob Storage (Binary Large Object)** is a service for storing large amounts of unstructured data: **text files, images, video, backups, logs, datasets (json, csv), virtual machine disks (VHD)**

Azure Storage organizes data into

Storage Account
└── Container (like a folder)
└── Blob (the actual file/data)

**Three Types of Blobs:**

| Type        | Use Case                                              |
| ----------- | ----------------------------------------------------- |
| Block Blob  | Files, documents, media — most common                 |
| Append Blob | Logs, audit trails — optimized for appending          |
| Page Blob   | Disks for Azure VMs — optimized for random read/write |

**Blob Storage Tiers (for cost management)**

| Benefit | Explanation                               | Use When                          |
| ------- | ----------------------------------------- | --------------------------------- |
| Hot     | Frequently accessed data                  | Web apps, active content          |
| Cool    | Infrequently accessed, lower cost         | Monthly backups                   |
| Archive | Rarely accessed, lowest cost, slow access | Legal archives, long-term storage |

When integrate with Storage Account, we will use two information: **Access Keys** as Connection String and **Container Name**. We can also create the Container from the API

**Azure Blob Storage — Real-World Uses & Purpose**

| Use Case                       | Purpose                                                                                    |
| ------------------------------ | ------------------------------------------------------------------------------------------ |
| User File Uploads              | Store files from users (images, PDFs, documents) securely and scalably.                    |
| Media Storage                  | Host large media files (videos, audio) with streaming or CDN support.                      |
| Backup & Disaster Recovery     | Store VM snapshots, database backups, and configuration files safely.                      |
| Application Log Archival       | Collect and archive logs for diagnostics, audit, and compliance.                           |
| Static Website Hosting         | Serve websites (HTML/CSS/JS) directly from Blob Storage with optional custom domain.       |
| Data Lake / Big Data Ingestion | Ingest and store raw data (CSV, JSON, Parquet) for analytics pipelines.                    |
| Secure Document Sharing        | Allow secure, time-limited access to sensitive files using SAS tokens.                     |
| Event-Driven Automation        | Trigger Azure Functions or Logic Apps when a file is uploaded (e.g., auto-process, alert). |

**Why do we need Azure Blob Storage?**

| Reason                  | Explanation                                                                             |
| ----------------------- | --------------------------------------------------------------------------------------- |
| Scalable                | We can store any amounts of file data - no need to manage disk                          |
| Cost-effective          | Just need to pay for what you store. No upfront hardware or maintenance                 |
| Accessible Anywhere     | Accessible from any region, device, or app over HTTPS — great for mobile, web, or APIs. |
| Easy Integration        | Works seamlessly with .NET, Python, Azure Functions, and DevOps pipelines.              |
| Supports All File Types | Upload and store anything: images, video, logs, JSON, backups, etc.                     |
| Analytics-Ready         | Integrated with Data Lake, Synapse, and Databricks for big data processing.             |

**Example Pricing (Estimates):**

| Tier    | Use Case                          | Approx. Price (per GB/month) |
| ------- | --------------------------------- | ---------------------------- |
| Hot     | Frequent access (web/app content) | ~$0.018/GB                   |
| Cool    | Infrequent access (backups)       | ~$0.01/GB                    |
| Archive | Rare access (legal/archive)       | ~$0.00099/GB                 |

We can also host a simple static website with **index.html, style.css, script.js** files quickly. Azure will provide the HTTPS by default, we can connect to **Azure CDN** for faster global performance

**Operation Costs (very low)**

| Operation        | Approx. Cost per 10,000 ops |
| ---------------- | --------------------------- |
| Read (GET)       | ~$0.004                     |
| Write (PUT/POST) | ~$0.05                      |

Even with thousands of reads/writes per day, you’ll spend less than $1/month in most cases.

✅ SQL Server: Store high-value events for real-time admin views

✅ Azure Blob: Store all audit logs (detailed, raw, long-term)

| Feature                     | Azure Blob (Hot) | Azure SQL (S0) |
| --------------------------- | ---------------- | -------------- |
| 1M logs/month (500 MB)      | ~$0.15           | ❌ ~$15        |
| Easy scaling to 100M logs   | ✅ Still cheap   | ❌ Expensive   |
| Long-term retention (years) | ✅ Cheap         | ❌ Costly      |
| Querying                    | ❌ No built-in   | ✅ Powerful    |

For SQL Database perspective

- We need to pay for the compute (not just storage), even if you use 6 GB only, you're charged for the plan

To **query multiple log files across one container** in Azure Blob Storage, the best approach is to use **Azure Synapse Analytics with Serverless SQL Pool** or **Azure Data Explorer (ADX)**

Step by step to **Use Azure Synapse Serverless SQL Pool**

- Ensure the file within the **readable format** (csv, json, parquet)
- Create **Synapse Workspace** and enable **Serverless SQL Pool**
- Connect Storage to Synapse
- Run a Query Over All Files
  `SQL
 SELECT *
 FROM OPENROWSET(
     BULK 'https://yourstorageaccount.blob.core.windows.net/logs/*.csv',
     FORMAT = 'CSV',
     FIELDTERMINATOR = ',',
     ROWTERMINATOR = '\n',
     FIRSTROW = 2
 ) AS logs
 WHERE level = 'ERROR';    
`
  **Cost**
- We are charged only for query execution, not storage or uptime.
- No separate cost for infrastructure or reserved compute.

**_Practice Case 1.1.1.4. Azure Blob Storage_**

###### 1.1.1.5. Azure VPN Gateway

**Azure VPN Gateway** is a **networking service** that lets you **connect your on-premises networks** to **Azure** over the Internet **securely and privately** using **IPsec/IKE VPN tunnels**

**Types of VPN Connections:**
| Type | Description |
| ---------------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| Site-to-Site (S2S) | Connects your on-premises network to Azure VNet over a VPN device. |
| Point-to-Site (P2S) | Individual client devices (e.g., laptops) connect securely to Azure using certificates or RADIUS authentication. |
| VNet-to-VNet | Connect two Azure VNets (even across regions) together via VPN Gateway. |
| ExpressRoute with VPN failover | Use VPN Gateway as a backup if your ExpressRoute connection fails. |

**Site-to-Site (S2S) VPN:** we want multiple servers/devices in your office to communicate with Azure resources (like VMs, databases) as if they are on the same local network.

**Point-to-Site (P2S) VPN:** A remote developer needs to securely access VMs or databases in Azure from their personal laptop.

**VNet-to-VNet VPN:** You have a frontend app in one VNet (East US) and a backend service in another VNet (West US), and they need to communicate securely.

**ExpressRoute with VPN Failover:** ExpressRoute is a service that allows you to create a **private connection** between your
**on-premises network (e.g., office/data center)** and **Azure — without going over the public internet.**

| VPN Type                | Connects...                                    | Use Case                          | Speed & Reliability             | Internet-Based? | Cost        |
| ----------------------- | ---------------------------------------------- | --------------------------------- | ------------------------------- | --------------- | ----------- |
| **Site-to-Site (S2S)**  | On-prem network ↔ Azure VNet                   | Office/data center to Azure       | Medium speed, reliable          | ✅ Yes          | 💰 Low      |
| **Point-to-Site (P2S)** | Individual device ↔ Azure VNet                 | Remote users (e.g., laptops)      | Lower speed, good for few users | ✅ Yes          | 💰 Very Low |
| **VNet-to-VNet**        | Azure VNet ↔ Azure VNet (same or diff. region) | Linking Azure regions or services | Medium speed, secure            | ✅ Yes          | 💰 Low      |
| **ExpressRoute**        | On-prem network ↔ Azure VNet (private circuit) | High-performance enterprise apps  | 🚀 High speed, SLA-backed       | ❌ No (private) | 💰💰 High   |

**_Practice Case 1.1.1.5. Azure VPN Gateway_**

##### 1.1.2. PaaS (Platform as a Service)

Azure provides a managed platform for **building, testing, deploying, and scaling applications**. **No need to manage infrastructure or OS updates**, Azure PaaS Examples:

- **Azure App Service**: Deploy web apps with auto-scaling and CI/CD.
- **Azure Functions**: Run serverless functions triggered by events.
- **Azure SQL Database**: Managed relational database with high availability.
- **Azure Logic Apps**: Automate workflows using a visual designer.
- **Azure Kubernetes Service (AKS)**: Container orchestration without managing master nodes.

###### 1.1.2.1. Azure App Service

**Azure App Service** is one of the most popular and powerful **PaaS (Platform-as-a-Service)** offerings on Azure. It allows you to **deploy, scale, and manage** web apps easily without managing infrastructure.

We can use **Azure App Service** to:

- **Host web apps, REST APIs, or mobile backends** in .NET, Java, Node.js, Python, PHP, etc.
- Deploy via **GitHub, Azure DevOps, or ZIP/Pipeline.**
- Get built-in features like: **SSL, Custom domain, Authentication, Monitoring, Staging slots**

It will automatically add (horizontally) or remove instances (servers) of your app based on real-time demand — like CPU, memory, or number of requests. To achieve it, we will define the **CPU usage, Memory usage, HTTP request count, Custom metrics (e.g., queue length in Service Bus)**

**For Example:**

- If CPU > 70% for 5 minutes, increase to 3 instances
- If CPU < 30% for 10 minutes, reduce to 1 instance

- Handle traffic spikes without manual intervention
- Save costs when load is low

**High-Level Comparison for Web App (.NET), WebJob, Azure Function**

| Feature              | **Web App (.NET)**       | **WebJob**                        | **Azure Function**                  |
| -------------------- | ------------------------ | --------------------------------- | ----------------------------------- |
| Purpose              | Serve web/API requests   | Run background or scheduled tasks | Event-driven, serverless compute    |
| Triggered By         | HTTP Requests            | Timer, Queue, Manual, Continuous  | Timer, HTTP, Queue, Blob, etc.      |
| Execution Model      | Always On (Web Server)   | Runs inside Web App plan          | Starts on event, scales dynamically |
| Hosting              | App Service              | Attached to App Service           | Serverless Function App             |
| Scaling              | Auto-scale with App Plan | Shares App Plan scaling           | Auto-scales independently           |
| Dev Language Support | .NET, Node, Java, etc.   | .NET, Python, etc.                | .NET, Python, JavaScript, etc.      |
| Cost Model           | App Service Plan pricing | Free (shared with Web App)        | Consumption-based (pay per use)     |
| Use Cases            | Web/API apps             | Queue processing, scheduled jobs  | Serverless jobs, APIs, ETL tasks    |

**_Practice Case 1.1.2.1. Azure App Service_**

###### 1.1.2.2. Azure Functions

**Azure Functions** will run **small pieces of code ("functions")** in the cloud, without worrying about infrastructure

- 💡 **Serverless** → You don’t manage VMs or servers
- ⚡ **Event-driven** → Executes on demand (e.g., timer, HTTP, queue)
- 💰 **Pay only for what you use** → Billed per execution

**What You Can Build with Azure Functions**
| Trigger Type | Use Case |
| ----------------- | ---------------------------------------------- |
| **HTTP Trigger** | Build lightweight APIs or webhooks |
| **Timer Trigger** | Run scheduled tasks (like CRON jobs) |
| **Queue Trigger** | Process messages in Azure Queue or Service Bus |
| **Blob Trigger** | React to new file uploads |
| **Cosmos DB** | Process changes to database records |

**Total Cost Comparison (Typical Small App)**
| Platform | Cost (Low Load) | Cost (High Load) | Auto-scale | Pay-When-Idle |
| --------------------------------- | ----------------- | ---------------- | ---------- | ------------- |
| **Azure Functions** (Consumption) | ✅ **Free–\$5/mo** | ✅ \$10–30+ | ✅ Yes | ✅ Yes |
| **App Service (Basic)** | ❌ \~\$14/mo min | ❌ \~\$14+ | ❌ Manual | ❌ No |
| **App Service (Standard)** | ❌ \~\$70/mo+ | ❌ \~\$100+ | ✅ Yes | ❌ No |
| **Azure VM (B1s)** | ❌ \~\$10/mo min | ❌ \$10–200+ | ❌ Manual | ❌ No |

**Summary key feature**

- **HTTP APIs and Webhooks:** a simple rest apis, or build the pre-api to be called by third party
- **Scheduled Jobs / Background Tasks:** cron job
- **Process Azure Queues:** consume the queue item inside the service account
- **React to Blob/File Uploads:** trigger when uploading file to blob
- **Database Change Detection (Cosmos DB):** trigger when uploading data to db
- **Send Emails, Push Notifications, SMS:** simple api integrating with other service
- **Business Logic Behind Azure Event Grid / Event Hub:**
- **ML & AI Inference:** integrate with ML & AI
- **CI/CD Automation:** easy to integrate with CI/CD
- **Secure Backend Operations:** apply security

**_Practice Case 1.1.2.2. Azure Functions_**

###### 1.1.2.3. Azure SQL Database

**Azure SQL Database** is a fully managed relational database service in Microsoft Azure. It’s built on **SQL Server**, so everything you know about T-SQL, tables, views, stored procedures still applies—but you **don’t have to manage infrastructure** (like VMs, disks, OS updates, SQL patching).

- Run SQL Server workloads without managing infrastructure.
- Automatically scale, patch, and back up.
- Integrate with other Azure services like Azure Functions, Logic Apps, or Power BI

**Deployment Models**

| Model                | Use Case                                                                                           |
| -------------------- | -------------------------------------------------------------------------------------------------- |
| **Single Database**  | A standalone database. Good for microservices or isolated workloads                                |
| **Elastic Pool**     | Share resources across multiple databases (for cost efficiency)                                    |
| **Managed Instance** | Close to full SQL Server, supports cross-db queries, SQL Agent, CLR, etc. Great for lift-and-shift |

**Summary Table: All SQL Server Types**

| **Type**                         | **What It Is (Theory)**                                     | **Cloud Model**  | **Who Manages Infra** | **Cross-DB Queries** | **Full SQL Features (Agent, CLR, etc.)** | **OS-Level Access** | **Best For**                                     |
| -------------------------------- | ----------------------------------------------------------- | ---------------- | --------------------- | -------------------- | ---------------------------------------- | ------------------- | ------------------------------------------------ |
| 🖥 SQL Server on Windows / Docker | Full SQL Server engine you install manually                 | On-Prem / Custom | You                   | ✅ Yes               | ✅ Yes                                   | ✅ Yes              | Full control, dev/test, legacy, container use    |
| 🖥 SQL Server on Azure VM         | SQL Server installed on a VM in Azure (IaaS)                | IaaS             | You                   | ✅ Yes               | ✅ Yes                                   | ✅ Yes              | Lift-and-shift, full control in the cloud        |
| ☁️ Azure SQL Server (logical)    | **Admin shell** for Azure SQL DBs and Elastic Pools         | PaaS (Mgmt Only) | Azure                 | ❌ No                | ❌ No                                    | ❌ No               | Grouping, authentication, firewall management    |
| ☁️ Azure SQL Database (Single)   | A fully managed, isolated SQL database                      | PaaS             | Azure                 | ❌ No                | ❌ No                                    | ❌ No               | Web/mobile apps, microservices, per-tenant DB    |
| ☁️ SQL Elastic Pool              | A pool of compute shared by multiple SQL Databases          | PaaS             | Azure                 | ❌ No                | ❌ No                                    | ❌ No               | Multi-tenant SaaS (many small tenant DBs)        |
| ☁️ SQL Managed Instance (MI)     | Fully managed SQL Server instance with nearly full features | PaaS             | Azure                 | ✅ Yes               | ✅ Yes                                   | ❌ No               | Lift-and-shift from on-prem with minimal changes |

**Unified SQL Server Comparison: Cost, Performance, and Use Cases**

| **Type**                         | **Cost Model**                             | **Performance**                                                         | **Best Use Case**                                         | **Example**                                                               |
| -------------------------------- | ------------------------------------------ | ----------------------------------------------------------------------- | --------------------------------------------------------- | ------------------------------------------------------------------------- |
| 🖥 SQL Server on Windows / Docker | Free (Dev/Express) or per core license     | Depends on your local/server hardware                                   | Local development, small business apps, full control      | Dev runs SQL Server in Docker on laptop with 4 cores                      |
| 🖥 SQL Server on Azure VM         | Pay per VM size + SQL license              | You choose VM size (B, D, E series), best for stable/known workloads    | Legacy migration, need full access to OS/SQL config       | A manufacturing ERP system migrated to Azure VM with SQL Server installed |
| ☁️ Azure SQL Server (Logical)    | Free (logical shell only)                  | N/A (doesn’t execute queries)                                           | Managing access, firewall, and grouping DBs               | A SaaS app groups all tenant DBs under one logical server                 |
| ☁️ Azure SQL Database (Single)   | Pay per DB (vCore or DTU model)            | Isolated, elastic performance; good scaling for web apps                | Web apps, mobile apps, single-tenant SaaS                 | An eCommerce platform with 1 DB per store                                 |
| ☁️ SQL Elastic Pool              | Pay per pool (vCore/DTU shared across DBs) | Shared CPU/memory across DBs — optimized for bursty/irregular workloads | Multi-tenant SaaS with 100s of light-use tenants          | A POS system with 500 small clients, each using their own DB in a pool    |
| ☁️ SQL Managed Instance (MI)     | Pay per vCore, storage + license           | High and stable performance; auto-patch, HA; supports full SQL features | Lift-and-shift apps, cross-DB joins, legacy compatibility | A logistics platform using cross-DB queries and SQL Agent jobs            |

**_In Azure (and in SQL Server in general), separate databases = separate query engines and memory pools, unless they're explicitly sharing (like in Elastic Pools)._**

| **Environment**                   | **Shared Resources?** | **Isolation Level** | **Can One DB Affect Others?** |
| --------------------------------- | --------------------- | ------------------- | ----------------------------- |
| SQL Server (same instance)        | ✅ Yes                | ❌ Low              | ✅ Yes                        |
| SQL Server (separate instances)   | ⚠️ Partial            | ⚠️ Medium           | ⚠️ Maybe (OS-level only)      |
| SQL Server (separate VMs)         | ❌ No                 | ✅ High             | ❌ No                         |
| Azure SQL Database (separate DBs) | ❌ No                 | ✅ High             | ❌ No                         |
| Azure Elastic Pool                | ✅ Yes (shared pool)  | ❌ Low              | ✅ Yes                        |
| Azure SQL Managed Instance        | ✅ Yes                | ❌ Low              | ✅ Yes                        |

**How to cost per database**
| Feature | SQL Database (Single) | SQL Elastic Pool | SQL Managed Instance |
| ----------------------------- | --------------------- | ---------------- | -------------------- |
| **Create 1 DB** | Billed separately | Included in pool | Included in MI |
| **Create 10 DBs** | 10× the cost | Still same pool | Still same MI |
| **Price per DB** | ✅ Yes | ❌ No | ❌ No |
| **Price per pool/instance** | ❌ No | ✅ Yes | ✅ Yes |
| **Scales well with many DBs** | ❌ No | ✅ Yes | ✅ Yes |

**_Practice Case 1.1.2.3. Azure SQL Database_**

###### 1.1.2.4. Azure Logic Apps

**Azure Logic Apps** is a powerful service for automating workflows and integrating systems without writing much (or any) code. It’s especially useful for automating business processes and connecting cloud/on-prem services like Office 365, SQL Server, Azure Functions, Outlook, SharePoint, and many more.

**Key Differences: Azure Logic Apps vs Azure Functions**
| Feature / Aspect | **Azure Logic Apps** | **Azure Functions** |
| --------------------------- | ----------------------------------------------------- | ----------------------------------------------- |
| **Primary Use** | Workflow automation and integration | Execute custom code logic on-demand |
| **Design Style** | Low-code / No-code (Visual Designer) | Code-based (C#, JS, Python, etc.) |
| **Best For** | Connecting systems, services, and automating tasks | Running small code blocks and backend logic |
| **Trigger Types** | Many built-in triggers (HTTP, Recurrence, Blob, etc.) | HTTP, Timer, Queue, Blob, EventGrid, etc. |
| **Connectors** | 600+ built-in connectors (SQL, Outlook, Teams, SAP…) | Limited native bindings, needs SDK/integration |
| **Error Handling** | Built-in (try-catch, retry policies in UI) | Must be implemented in code |
| **Monitoring** | In Logic App Designer & Azure Monitor | In Application Insights |
| **Cost Model** | Per action/run in **Consumption Plan** | Per execution time and memory used |
| **Hosting** | Runs in Logic Apps runtime (managed by Azure) | Runs in Azure Functions runtime (can be custom) |
| **Code Reuse / Modularity** | Limited, mainly via child workflows | High — supports shared libraries, DI, etc. |

**Key Reasons to Use Azure Logic Apps Instead of Just Azure Functions**
| Reason | Logic Apps | Azure Functions |
| --------------------------------- | ----------------------------------------------------------- | ---------------------------------------------------------- |
| **Low-code / Visual Design** | Drag-and-drop visual workflow; easier for non-developers | Full-code; great flexibility, but harder to maintain |
| **Built-in Connectors** | 600+ connectors (SQL, SAP, Salesforce, Outlook, etc.) | Must write SDK/REST code for most integrations |
| **Error Handling, Retries** | Built-in try/catch scopes, retry policies, monitoring | Must write code to handle all error conditions manually |
| **Long-running workflows** | Supports long-timeouts, stateful workflows, approvals | Stateless by default (limited to 5–60 min, depending plan) |
| **Business Process Automation** | Designed for business automation scenarios (B2B, approvals) | Functions is better for logic, not workflow orchestration |
| **Enterprise Scenarios** | Great for EDI, B2B, SAP, etc. | Not built for enterprise workflow integration |
| **Maintenance** | Easy to update steps via UI | Requires code change, redeploy |
| **Security (Managed Connectors)** | Secure integration via identity, Key Vault, hybrid | You manage secrets, tokens, etc. |

**When to use**
| Use Case | Best Choice |
| -------------------------------- | -------------------- |
| Workflow + external integrations | Logic App |
| Pure logic/computation (code) | Azure Function |
| Workflow + custom code combo | Both (best practice) |

###### 1.1.2.5. Azure Kubernetes Service (AKS)

**Azure Kubernetes Service (AKS)** is a powerful tool for deploying, scaling, and managing containerized applications using Kubernetes — all with the ease of Azure’s managed platform.

| **Component**           | **What it is**                                                                     |
| ----------------------- | ---------------------------------------------------------------------------------- |
| **AKS Cluster**         | The overall managed Kubernetes environment (control plane + node pools).           |
| **Node Pool**           | A group of virtual machines (nodes) with the same configuration (size, OS...).     |
| **Node (VM)**           | A single virtual machine inside a node pool.                                       |
| **VM Scale Set (VMSS)** | Azure’s way of auto-scaling/managing groups of identical VMs (used by node pools). |
| **Pod**                 | Smallest unit in Kubernetes; runs containers.                                      |

**Hierarchy (How Everything Connects)**
AKS Cluster
│
├── Node Pool (default or custom)
│ ├── VM Scale Set (manages the node pool)
│ │ ├── Node 1 (Azure VM)
│ │ ├── Node 2 (Azure VM)
│ │ └── Node N
│ └── (Kubernetes runs here: kubelet, container runtime, etc.)
│
└── Kubernetes Control Plane (managed by Azure — you don't see it)

**Definition**

- **AKS Cluster:** **Azure manages the control plane** (the master nodes, etcd, API server). We will manage the **worker nodes** (via node pools)
- **Node Pool:** logical groups of VM in the AKS cluster, the **Node Pool** will be backed by **VM Scale Set**
- **Node (VM):** a single virtual machine in Azure inside a node pool, each node runs: kubelet, containerd or dockerd, and our Pods
- **VM Scale Set:** Azure’s native way to scale and manage groups of identical VMs. Each node pool is backed by a VM Scale Set. It is used to **Add/remove nodes automatically, Upgrade OS versions, Ensure high availability**

```
             [ Azure Kubernetes Service (AKS) ]
                       ┃
      ┌────────────────────────────────────┐
      │   Managed Control Plane (Azure)    │ ← Azure-managed, not visible
      └────────────────────────────────────┘
                       ┃
        ┌────────────────────────┐
        │      Node Pool         │ ← e.g., Linux Pool
        └────────────────────────┘
              ┃         ┃
          [Node1]    [Node2] ← Azure VM (via VMSS)
              ┃         ┃
         [Pods]     [Pods]    ← Your apps run here

```

**AKS Benefits Summary**

- **Managed Control Plane:** don’t have to install or maintain Kubernetes master nodes (API server, etcd, etc.) — Azure manages them for free.
- **Azure Integration:** easy to integrate with Azure Service Ecosystem ACR (for container images), Key Vault (for secrets), Load Balancer, Application Gateway, and VNets
- **Autoscaling & Spot VMs:** automatically scale nodes and pods based on load. Use spot instances to save money on non-critical workloads.
- **Enterprise-Grade Security:** azure AD + RBAC for secure access, private clusters (no public IP), Pod-managed identities to securely access Azure services
- **CI/CD Friendly:** Easily integrate with GitHub Actions, Azure DevOps, Helm / ArgoCD / Flux
- **Easy Upgrades:** Upgrade Kubernetes versions and nodes with a simple Azure CLI command, with minimal downtime.
- **Built-in Monitoring & Logs:** Use Azure Monitor and Log Analytics to view:
  - Pod metrics (CPU, memory)
  - Logs (live and historical)
  - Health dashboards
- **Full Kubernetes Features:** KEDA for event-based autoscaling, Network policies, CSI drivers, Ingress controllers
- **Faster Team Onboarding:** Azure-native IAM, policies, and tools make it easy for teams to start using Kubernetes with secure governance.

**Node Pool Architecture**

| VM SKU Family                                     | Architecture     |
| ------------------------------------------------- | ---------------- |
| `Standard_D2s_v3`, `F4s_v2`, etc.                 | `x64` (amd64) ✅ |
| `Standard_D2ps_v5/v6`, `Eps_v5`, `Arm-based` SKUs | `ARM64` ❌       |

**Ingress Configuration**

- Your Ingress EXTERNAL-IP was <pending> because no public IP was automatically assigned.
- The command you ran was essential to **list and choose the correct IP.**

```sh
az network public-ip list --query "[?ipAddress!=null]" --output table
Location    Name                                  IdleTimeoutInMinutes    IpAddress       ProvisioningState    PublicIPAddressVersion    PublicIPAllocationMethod    ResourceGuid                          ResourceGroup
----------  ------------------------------------  ----------------------  --------------  -------------------  ------------------------  --------------------------  ------------------------------------  ----------------------------
westus      my-jenkins-mv-ip                      4                       20.228.105.117  Succeeded            IPv4                      Static                      dc977be8-f7ff-44a0-9025-d77b42dc5d09  ask-rg
westus      37bb5577-705d-49b5-8443-790cc834f025  4                       52.234.0.105    Succeeded            IPv4                      Static                      7dc1aae1-eaa7-45e4-8fb9-903598a90485  MC_ask-rg_aks-cluster_westus

```

- We fixed it by manually using a pre-existing static IP in the AKS-managed resource group. Creating a Service of type LoadBalancer with the correct annotations:

```yaml
annotations:
  service.beta.kubernetes.io/azure-pip-name: 37bb5577-705d-49b5-8443-790cc834f025
  service.beta.kubernetes.io/azure-load-balancer-resource-group: MC_ask-rg_aks-cluster_westus
```

**Full Request Flow (Public Web Access to App in AKS)**

```pgsql
            ┌────────────┐
            │  Internet  │
            └─────┬──────┘
                  ↓
        ┌────────────────────┐
        │ Azure Public IP    │
        │ (bound to LB)      │
        └────────┬───────────┘
                 ↓
        ┌────────────────────┐
        │ Azure Load Balancer│ ◀─── Created by Azure automatically
        └────────┬───────────┘
                 ↓
        ┌────────────────────┐
        │ Ingress Controller │ ◀─── You deploy this (e.g. nginx-ingress)
        └────────┬───────────┘
                 ↓
        ┌────────────────────┐
        │ Ingress Resource   │ ◀─── Your routing config YAML
        └────────┬───────────┘
                 ↓
        ┌────────────────────┐
        │ K8s Service        │ ◀─── You define (ClusterIP type)
        └────────┬───────────┘
                 ↓
        ┌────────────────────┐
        │ App Pod (Angular)  │ ◀─── Runs inside AKS
        └────────────────────┘

```

| **Component**                       | **Who Creates It?**        | **Details**                                                          |
| ----------------------------------- | -------------------------- | -------------------------------------------------------------------- |
| **AKS Cluster (VMs, Network, K8s)** | **Azure (AKS)**            | You create this via Azure Portal, CLI, or Terraform                  |
| **Load Balancer**                   | **Azure (when requested)** | Auto-created **when you define a `Service` of `type: LoadBalancer`** |
| **Public IP**                       | **Azure**                  | Azure assigns this to the Load Balancer (can be dynamic or static)   |
| **Ingress Controller (NGINX)**      | **You (inside AKS)**       | Runs as a **Deployment** in your AKS cluster                         |
| **Ingress Resource**                | **You (Kubernetes YAML)**  | Defines the routing rules (host, path)                               |
| **Kubernetes Service (ClusterIP)**  | **You (YAML)**             | Exposes your app internally in the cluster                           |
| **Pods (Angular/.NET)**             | **You (Deployment YAML)**  | Your actual application containers                                   |

**If We Have a LoadBalancer, Why Do We Still Need Ingress?**

| Feature            | LoadBalancer Service   | Ingress (w/ NGINX)   |
| ------------------ | ---------------------- | -------------------- |
| Public IP          | ✅ Yes                 | ✅ Yes (shared)      |
| Routing            | ❌ Single service only | ✅ Multiple services |
| Path-based routing | ❌ No                  | ✅ Yes               |
| Host-based routing | ❌ No                  | ✅ Yes               |
| TLS termination    | ❌ No                  | ✅ Yes               |
| Cost-efficient     | ❌ One IP per service  | ✅ One IP for all    |

**_Practice Case 1.1.2.5. Azure Kubernetes Service (AKS)_**

=================================================================================================================================================== [Review]

##### 1.1.3. SaaS (Software as a Service)

Azure hosts ready-to-use apps for business needs—users just sign in and use them. Microsoft manages everything, Azure SaaS Examples:

- **Microsoft 365 (Office 365)**: Word, Excel, Teams, Outlook (hosted by Azure)
- **Dynamics 365**: CRM and ERP solutions
- **Power BI**: Business analytics platform
- **Azure DevOps Services**: Code repo, CI/CD pipelines, work tracking

###### 1.1.3.1. Authentication & Identity

**Azure Active Directory B2C** (Business-to-Consumer) is a cloud identity service that lets you:

- Allow users to sign up, sign in, and manage their accounts
- Use social accounts (Google, Facebook) or local accounts (email/password)
- Add custom branding (e.g., your app or tenant-specific logos)
- Scale to millions of users securely

An **Azure AD B2C Tenant** is your app's **private identity system** — like a gated community where only approved users can live.

Without it, we have to **build your own authentication system**: sign up forms, password storage, MFA, social login integration — risky and time-consumings

**What Is Microsoft Entra External ID?**
**Microsoft Entra External ID** is the modern identity platform to let external users (like customers, citizens, partners) securely sign in to your applications using:

- Email/password
- Social identities (Google, Facebook, etc.)
- Identity federation (other Azure AD tenants, etc.)
- Passkeys, MFA, conditional access

It supports **OAuth 2.0, OpenID Connect, and SAML**, just like Azure AD B2C.

**Public Client (SPA / Mobile)**

- Register when the FE talks directly to Entra to login. Which mean, this is used when the FE handles the login flow, not the backend.
- The flow:
  - FE will forward user to Microsoft Entra view to loign
  - Get the ID Token (for identity) and Access Token (for calling the BE API)
  - Then uses **access_token** to call the BE

**Confidential Client (Backend / Web Server)**

- Register this when the BE handles login or calls Microsoft Entra to get a token using secret
- The flow:
  - FE call to BE, BE redirect user to Microsoft Entra to login
  - Receive the **authorization code**
  - Exchanges to **token** or **cookies**
  - Stores the session or token server-side

**Web API (Protected Resource)**

- Register this when the API is going to receive and validate access tokens
- The flow:
  - Client (frontend or other backends) will authenticate with Azure by secret key to get the valid access token
  - The API will check the token's issuer, audience, expiration, and scopes
  - It will allow or reject requests based on the token claims

###### 1.1.3.2. API Management

**Azure API Management (APIM)** is a **gateway** between your APIs and the clients who use them.

- **Expose** your APIs to developers (public or internal)
- **Protect** them from abuse or misuse
- **Monitor** traffic and errors
- **Control** access using security policies

**Key Components of APIM**

| Component            | Description                                                                                                                         |
| -------------------- | ----------------------------------------------------------------------------------------------------------------------------------- |
| **API Gateway**      | The runtime component that receives API calls, applies policies, and routes to your backend. It’s the **front door** for your APIs. |
| **Azure Portal**     | Used by **API publishers** (you) to manage APIs: import, secure, version, monitor, etc.                                             |
| **Developer Portal** | A customizable website where developers can discover, test, and subscribe to your APIs.                                             |
| **Management Plane** | The set of Azure REST APIs or ARM templates you can use to automate management of the APIM service.                                 |

**Entities Inside APIM**

- Product: A collection of APIs with access rules, we can assign subscription keys, rate limits, and permission at the product level
- API: Represents a backend service (like your ASP.NET Web API or Azure Function)
- Operation: An individual API endpoint, such as GET /users, POST /order
- Policy: Rules or logic we can apply operation, API, or global scope
- Subscription: Developer subscribe to a Product to get access to the APIs. Each subscription has a key used to call the APIs

**API Gateway vs Azure API Management**

| Feature                               | **Azure API Management (APIM)**                      | **API Gateway (Generic / Azure App Gateway)** |
| ------------------------------------- | ---------------------------------------------------- | --------------------------------------------- |
| **Purpose**                           | Full API lifecycle management                        | Traffic routing & security                    |
| **Routing & Load Balancing**          | ✅ Yes                                               | ✅ Yes                                        |
| **Security (OAuth, JWT, IP filters)** | ✅ Rich built-in policies                            | ⚠️ Basic or custom setup                      |
| **Rate Limiting / Throttling**        | ✅ Built-in policies                                 | ❌ Manual or not supported                    |
| **Request/Response Transformation**   | ✅ (XML ↔ JSON, headers, etc.)                       | ❌ Not natively supported                     |
| **API Versioning & Revisions**        | ✅ Yes                                               | ❌ No                                         |
| **Subscription Key Management**       | ✅ Yes (per product/user)                            | ❌ No                                         |
| **Developer Portal**                  | ✅ Yes (customizable site)                           | ❌ No                                         |
| **Monitoring & Analytics**            | ✅ Built-in (per API/user)                           | ⚠️ Basic (via Azure Monitor only)             |
| **Use Case**                          | Public/partner/internal APIs with full control       | Internal microservices or simple routing      |
| **Best For**                          | Enterprise APIs, API-as-a-product, multi-tenant APIs | Lightweight, internal routing scenarios       |

**Developer Portal Customization**

The **Developer Portal** in **Azure API Management** (APIM) is your public-facing website where developers can:

- Discover your APIs
- Read documentation
- Sign up and subscribe to products
- Test APIs directly from the browser

We can customize it fully to match the brand and needs.

###### 1.1.3.3. Email & Notification [TODO]

Email and notifications are important features in any SaaS application—for user **sign-ups, alerts, password resets, invoices, and more.**

**a. Sending Emails in Azure SaaS**

- **SendGrid** is a **cloud-based email delivery service** used to **send emails from applications**. It's designed for:
  - **Transactional emails** (sign-up, password reset)
  - **Marketing emails** (campaigns, newsletters)
  - **High-volume, reliable, and trackable email sending**
  - **_Basically, Send Grid is like a SMTP server, we can make a request to Send Grid to send mail directly, or we can use another way, which is application will make a request to Azure Queue, then we use Azure Function as serverless to be triggered to send mail_**
- **SMTP-based providers** is any email service that lets you send emails by connecting to their SMTP server (like Office 365, Gmail, etc.)
- **Azure Communication Services Email** (newer native option)

**b. Notifications (System / Push / In-App)**
**Types:**

- In-App Notifications: For example, alerts in Angular frontend via SignalR/WebSocket.
- Push Notifications: Mobile/web push (using Azure Notification Hubs or Firebase).
- System Notifications: Emails, SMS, or Teams messages.

**Azure Options:**

- **Azure Notification Hubs** – for push notifications to iOS/Android/web.
- **Azure SignalR Service** – for real-time web app notifications.
- **Azure Logic Apps or Azure Functions** – for sending alerts based on backend events.

**c. SaaS Multi-Tenant Consideration**

- Store user notification preferences (e.g., per-tenant settings).
- Use a queue-based approach for sending bulk notifications (Azure Queue + Azure Function).
- Ensure rate-limiting and retries using Azure Durable Functions or Logic Apps.

The work flow we can apply for email notification

```cs
  [Microservices] ─┬─> [Azure Queue / Service Bus] ─┬─> [Azure Function / Worker Service]
                   └───────────────────────────────┘          ↓
                                                  [SendGrid / Azure Communication Services]
                                                               ↓
                                                        [User receives email]
```

###### 1.1.3.4. Monitoring & Logging [TODO]

===================================================================================================================================================

#### 1.2. Public, Private, Hybrid Cloud [TODO]

#### 1.3. Cloud benefits: scalability, elasticity, agility [TODO]

#### 1.4. Stateful vs Stateless Architecture [TODO]

#### 1.5. App Service vs Functions vs AKS [TODO]

#### 1.6. Containers vs App Service vs Kubernetes [TODO]
